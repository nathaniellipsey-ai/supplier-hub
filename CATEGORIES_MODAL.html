<!-- 
    CATEGORIES MODAL COMPONENT
    Copy this entire <script> block into your index.html
    Then find the Categories button and change onclick="..." to onclick="showCategoriesModal()"
-->

<script>
// Show categories in a modal
async function showCategoriesModal() {
    const modal = document.createElement('div');
    modal.id = 'categoriesModal';
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        animation: fadeIn 0.3s ease-in;
    `;
    
    const content = document.createElement('div');
    content.style.cssText = `
        background: #ffffff;
        border-radius: 16px;
        padding: 40px;
        max-width: 700px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 30, 96, 0.4);
        animation: slideUp 0.3s ease-out;
    `;
    
    // Header
    const header = document.createElement('h2');
    header.textContent = 'Browse by Category';
    header.style.cssText = `
        color: #001e60;
        margin-bottom: 10px;
        font-size: 28px;
        font-weight: 800;
        font-family: 'Space Grotesk', sans-serif;
    `;
    content.appendChild(header);
    
    // Subtitle
    const subtitle = document.createElement('p');
    subtitle.textContent = 'Click a category to see all suppliers in that category';
    subtitle.style.cssText = `
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
    `;
    content.appendChild(subtitle);
    
    // Loading spinner
    const spinner = document.createElement('div');
    spinner.textContent = 'Loading categories...';
    spinner.style.cssText = `
        text-align: center;
        color: #4dbdf5;
        padding: 20px;
    `;
    content.appendChild(spinner);
    modal.appendChild(content);
    document.body.appendChild(modal);
    
    try {
        // Fetch categories
        const response = await fetch('/api/suppliers/categories/all');
        const data = await response.json();
        const categories = data.categories || {};
        
        // Clear loading
        spinner.remove();
        
        // If no categories, show message
        if (Object.keys(categories).length === 0) {
            const noData = document.createElement('p');
            noData.textContent = 'No suppliers imported yet. Please import supplier data first.';
            noData.style.cssText = `
                text-align: center;
                color: #999;
                padding: 20px;
            `;
            content.appendChild(noData);
        } else {
            // Create category grid
            const grid = document.createElement('div');
            grid.style.cssText = `
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            `;
            
            // Sort categories alphabetically
            const sortedCategories = Object.entries(categories).sort((a, b) => a[0].localeCompare(b[0]));
            
            sortedCategories.forEach(([category, count]) => {
                const card = document.createElement('div');
                card.style.cssText = `
                    padding: 20px;
                    border: 2px solid #a9ddf7;
                    border-radius: 8px;
                    cursor: pointer;
                    text-align: center;
                    transition: all 0.3s ease;
                    background: #ffffff;
                `;
                
                const categoryName = document.createElement('div');
                categoryName.textContent = category;
                categoryName.style.cssText = `
                    font-weight: 700;
                    font-size: 16px;
                    color: #001e60;
                    margin-bottom: 8px;
                    font-family: 'Space Grotesk', sans-serif;
                `;
                card.appendChild(categoryName);
                
                const countDiv = document.createElement('div');
                countDiv.textContent = `${count} supplier${count !== 1 ? 's' : ''}`;
                countDiv.style.cssText = `
                    font-size: 13px;
                    color: #4dbdf5;
                    font-weight: 600;
                `;
                card.appendChild(countDiv);
                
                // Hover effect
                card.addEventListener('mouseover', () => {
                    card.style.cssText = `
                        padding: 20px;
                        border: 2px solid #ffc220;
                        border-radius: 8px;
                        cursor: pointer;
                        text-align: center;
                        transition: all 0.3s ease;
                        background: #ffc220;
                        transform: translateY(-5px);
                        box-shadow: 0 10px 25px rgba(0, 30, 96, 0.2);
                    `;
                    categoryName.style.color = '#001e60';
                    countDiv.style.color = '#001e60';
                });
                
                card.addEventListener('mouseout', () => {
                    card.style.cssText = `
                        padding: 20px;
                        border: 2px solid #a9ddf7;
                        border-radius: 8px;
                        cursor: pointer;
                        text-align: center;
                        transition: all 0.3s ease;
                        background: #ffffff;
                    `;
                    categoryName.style.color = '#001e60';
                    countDiv.style.color = '#4dbdf5';
                });
                
                card.addEventListener('click', () => {
                    filterByCategory(category);
                    modal.remove();
                });
                
                grid.appendChild(card);
            });
            
            content.appendChild(grid);
        }
        
        // Close button
        const closeBtn = document.createElement('button');
        closeBtn.textContent = 'Close';
        closeBtn.style.cssText = `
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #001e60 0%, #4dbdf5 100%);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 700;
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.3s;
        `;
        closeBtn.addEventListener('mouseover', () => {
            closeBtn.style.transform = 'translateY(-2px)';
            closeBtn.style.boxShadow = '0 10px 25px rgba(0, 30, 96, 0.2)';
        });
        closeBtn.addEventListener('mouseout', () => {
            closeBtn.style.transform = 'translateY(0)';
            closeBtn.style.boxShadow = 'none';
        });
        closeBtn.addEventListener('click', () => modal.remove());
        content.appendChild(closeBtn);
        
    } catch (error) {
        console.error('Error loading categories:', error);
        spinner.textContent = 'Error loading categories';
        spinner.style.color = '#c62828';
    }
    
    // Close on background click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) modal.remove();
    });
}

// Filter suppliers by category
function filterByCategory(category) {
    // Update URL with category filter
    const url = new URL(window.location);
    url.searchParams.set('category', encodeURIComponent(category));
    url.searchParams.set('search', ''); // Clear any existing search
    window.location = url.toString();
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    @keyframes slideUp {
        from { 
            transform: translateY(50px);
            opacity: 0;
        }
        to { 
            transform: translateY(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);
</script>

<!-- 
INSTRUCTIONS TO USE THIS:

1. Copy the entire <script> block above (everything between <script> and </script>)

2. Open your index.html file

3. Find the "Categories" button (search for onclick and categories)

4. Change it from:
   <button onclick="filterByStat('categories')" ...>Categories</button>
   
   To:
   <button onclick="showCategoriesModal()" ...>Categories</button>

5. Paste the script block into a <script> tag in your index.html (near the end, before closing </body>)

6. Save and reload the page

7. Now when you click Categories, a beautiful modal will show with all categories!

RESULT:
- Modal shows all categories with supplier counts
- Beautiful Walmart blue and yellow colors
- Hover effects on category cards
- Click category to filter suppliers
- Close button and background click to close modal
-->